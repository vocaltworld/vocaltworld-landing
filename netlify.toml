[build]
base = "client"
command = "npm run build"
publish = "dist"

[functions]
directory = "../netlify/functions"

[dev]
command = "npm run dev"
port = 3999
targetPort = 5173
framework = "vite"
[[redirects]]
  from = "https://warm-meringue-f2f353.netlify.app/*"
  to = "https://survey.vocaltworld.com/:splat"
  status = 301
  force = true
  
# BLINDA: qualsiasi richiesta a /.netlify/functions/* deve andare SEMPRE alla function
[[redirects]]
  from = "/.netlify/functions/*"
  to = "/.netlify/functions/:splat"
  status = 200
  force = true

# NO-CACHE: evita comportamenti strani su Edge/CDN
[[headers]]
  for = "/.netlify/functions/*"
  [headers.values]
    Cache-Control = "no-store"